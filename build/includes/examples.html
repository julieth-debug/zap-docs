<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link rel="icon" href="favicon.ico" />

    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <link href="../stylesheets/navio.css" rel="stylesheet" type="text/css" media="all" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_examples">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="../images/logo.png" alt="Logo" />
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="examples"><a name="examples"></a>Examples</h1>

<p>The following are high-level examples on how to use the ZAP APIs to perform specific actions.</p>

<aside class="notice">
The examples shows some usages with the minimal required arguments. However, this is not a reference, and not all APIs 
nor arguments are shown. View the API catalog to see all the parameters and scope of each APIs.
</aside>

<h2 id="using-spider">Using Spider</h2>

<p>The Spider is a tool that is used to automatically discover new resources (URLs) on a particular site. It begins with a 
list of URLs to visit, called the seeds, which depends on how the Spider is started. The Spider then visits these URLs, 
it identifies all the hyperlinks in the page and adds them to the list of URLs to visit, and the process continues recursively as long as new resources are found.</p>

<p>During the processing of a URL, the Spider makes a request to fetch the resource and then parses the response, identifying hyperlinks. 
Each response type is processed differently in ZAP.</p>

<h3 id="start-the-spider">Start the spider</h3>
<pre class="highlight shell"><code><span class="c"># Start the spider scan </span>
<span class="gp">$ </span>curl <span class="s2">"http://localhost:8080/JSON/spider/action/scan/?apikey=zapAPIKey&amp;zapapiformat=JSON&amp;url=http://localhost:3000=&amp;contextName="</span>
</code></pre>

<p>The spider(s) explore the site and don&rsquo;t actually do any scanning. The <a href="#passive_scan">passive scan</a> rules examine all of 
the requests and responses flowing through ZAP and report the issues they can spot.</p>

<p>The spider API will return the scan ID as the response.</p>

<h3 id="view-status">View Status</h3>
<pre class="highlight shell"><code><span class="c"># To view the scan status</span>
<span class="gp">$ </span>curl <span class="s2">"http://localhost:8080/JSON/spider/view/status/?apikey=68u5tu85j34dc4g3ushdp847ku&amp;scanId=&lt;scan id&gt;"</span>
</code></pre>

<p>The scan is a async request. To view the status of the scan you can execute the API call which is shown in right column. </p>

<h3 id="view-spider-results">View Spider Results</h3>
<pre class="highlight shell"><code><span class="gp">$ </span>curl http://localhost:8080/JSON/spider/view/results/?apikey<span class="o">=</span>zapAPIKey&amp;scanId<span class="o">=</span>0
</code></pre>

<p>The following command in t</p>

<div class="center-column"></div>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"https://public-firing-range.appspot.com/address/location.hash/jshref"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"https://public-firing-range.appspot.com/address/location.hash/formaction"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"https://public-firing-range.appspot.com/dom/toxicdom/external/sessionStorage/array/eval"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"https://public-firing-range.appspot.com/address/locationsearch/documentwrite"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"https://public-firing-range.appspot.com/dom/toxicdom/sessionStorage/function/eval"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"https://public-firing-range.appspot.com/flashinjection/callbackParameterDoesNothing?callback=func"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="perform-passive-scan"><a name="passive_scan"></a>Perform Passive Scan</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'https://zap.com/v1/coverage'</span> -H <span class="s1">'Authorization: 3b036afe-0110-4202-b9ed-99718476c2e0'</span>


HTTP/1.1 200 OK

<span class="o">{</span>
    <span class="s2">"start_production_date"</span>: <span class="s2">"20140105"</span>,
    <span class="s2">"status"</span>: <span class="s2">"running"</span>,
    <span class="s2">"shape"</span>: <span class="s2">"POLYGON((-74.500997 40.344999,-74.500997 41.096999,-73.226 41.096999,-73.226 40.344999,-74.500997 40.344999))"</span>,
    <span class="s2">"id"</span>: <span class="s2">"sandbox"</span>,
    <span class="s2">"end_production_date"</span>: <span class="s2">"20140406"</span>
<span class="o">}</span>
</code></pre>

<p>All requests that are proxied through ZAP or initialised by tools like the spider are passively scanned. 
ZAP by default passively scans all HTTP messages (requests and responses) sent to the web application being tested. 
Passive scanning does not change the requests nor the responses in any way and is therefore safe to use.
This is good for finding problems like missing security headers or missing anti CSRF tokens but is no good for finding 
vulnerabilities like XSS which require malicious requests to be sent - thats the job of the <a href="#active_scan">active scanner</a>.</p>

<p>The (main) behaviour of the passive scanner can be configured using the Options Passive Scanner API.</p>

<p>Passive scanning can also be used for automatically adding tags and raising alerts for potential issues. A set of rules for 
automatic tagging are provided by default. These can be changed, deleted or added to via the Options Passive Scan Tags screen.
The alerts raised by passive scanners can be configured using the Options Passive Scan Rules screen.</p>

<p>The alerts for the passive scan can be obtained via issuing the following commands.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s2">"http://localhost:8080/JSON/core/view/alerts/?zapapiformat=JSON&amp;apikey=68u5tu85j34dc4g3ushdp847ku&amp;baseurl=http://localhost:3000&amp;start=&amp;count="</span>
</code></pre>

<h2 id="perform-active-scan"><a name="active_scan"></a>Perform Active Scan</h2>

<p>Active scanning attempts to find potential vulnerabilities by using known attacks against the selected targets.</p>

<p>Active scanning is an attack on those targets. You should NOT use it on web applications that you do not own.</p>

<p>In order to facilitate identifying ZAP traffic and Web Application Firewall exceptions, ZAP is accompanied by a script &ldquo;AddZapHeader.js&rdquo; which can be used to add a specific header to all traffic that passes through or originates from ZAP. eg: X-ZAP-Initiator: 3</p>

<p>It should be noted that active scanning can only find certain types of vulnerabilities. Logical vulnerabilities, such as broken access control, will not be found by any active or automated vulnerability scanning. Manual penetration testing should always be performed in addition to active scanning to find all types of vulnerabilities.</p>

<h2 id="perform-ajax-scan">Perform AJAX Scan</h2>

<p>ZAP by default passively scans all HTTP messages (requests and responses) sent to the web application being tested. Passive scanning does not change the requests nor the responses in any way and is therefore safe to use. Scanning is performed in a background thread to ensure that it does not slow down the exploration of an application.</p>

<p>The (main) behaviour of the passive scanner can be configured using the Options Passive Scanner Screen.</p>

<p>Passive scanning can also be used for automatically adding tags and raising alerts for potential issues. A set of rules for automatic tagging are provided by default. These can be changed, deleted or added to via the Options Passive Scan Tags screen.</p>

<p>The alerts raised by passive scanners can be configured using the Options Passive Scan Rules screen.</p>

<h2 id="perform-authentication">Perform Authentication</h2>

<p>Vitae turpis massa sed elementum tempus egestas sed sed risus. Pellentesque eu tincidunt tortor aliquam nulla facilisi cras. 
Tincidunt tortor aliquam nulla facilisi cras. Tristique senectus et netus et malesuada fames. Feugiat scelerisque varius morbi enim. 
Justo eget magna fermentum iaculis eu non diam. </p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
